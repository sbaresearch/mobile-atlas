{% extends "base.html" %}

    {% block content %}
    <h2>ProbeStatus for {{p.name if p.name}} - {{p.token.mac}}</h2>

    <h3>Summary</h3>
    <table>
        <tr>
            <th>Status</th>
            <th>Duration</th>
            <th>Percent</th>
        </tr>
        {% for st, duration in durations.items() %}
        <tr>
            <td>
              {%if st == "online"%}
                ğŸŸ¢ online
              {%elif st == "offline"%}
                ğŸŸ¥ offline
              {%elif st == "pre_registration"%}
                ğŸš§ no status
              {%endif%}</td>
            <td class="right">{{duration|format_timedelta("{hours:02}:{m:02}:{s:02}")}}</td>
            <td class="right">{{percentages[st]|round(2)}}%</td>
        </tr>
        {% endfor %}
    </table>

    <h3>Details</h3>
    <table>
        <tr>
            <th class="hidden">ID</th>
            <th>Status</th>
            <th>Begin</th>
            <th>End</th>
            <th>Duration</th>
            <th>Active</th>
        </tr>
        {% for s in p.status %}
        <tr>
            <td class="hidden">{{s.id}}</td>
            <td>{%if s.status.name=="online"%}ğŸŸ¢ online{%elif s.status.name=="offline"%}ğŸŸ¥ offline{%endif%}</td>
            <td>{{s.begin.strftime('%Y-%m-%d %H:%M:%S') if s.begin }}</td>
            <td>{{s.end.strftime('%Y-%m-%d %H:%M:%S') if s.end }}</td>
            <td class="right">{{s.duration()|format_timedelta}}</td>
            <td class="center">{{'âœ…' if s.active else 'âŒ'}}</td>
        </tr>
        {%endfor%}
    </table>
    {% endblock %}
